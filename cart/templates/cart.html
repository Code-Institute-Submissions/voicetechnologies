{% extends 'base.html' %}
{% load static %}
{% load bootstrap_tags %}
{% block header %}
    <div class="container-fluid section-container header-container">
        <div class="row title-row align-items-center cart-title">
            <div class="col-12 title-col">
                <h1 class="page-title">Cart <i class="fas fa-shopping-cart logo"></i></h1>
            </div>
        </div>
    </div>
{% endblock %}
{% block content %}
    <div class="container-fluid cart-container text-white">
        {% if cart_items %}
            <table class="table table-striped table-hover">
                <thead class="text-white">
                <tr>
                    <th>Image</th>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Change Quantity</th>
                    <th>Unit Price</th>
                </tr>
                </thead>
                <tbody>
                {% for item in cart_items %}
                    <tr class="text-white">
                        <td>
                            <div class="product rounded-circle"
                                 style="background-image: url('{{ MEDIA_URL }}{{ item.product.image }}')">
                            </div>
                        </td>
                        <td class="text-white">{{ item.product.name }}</td>
                        <form class="form" method="post" action="{% url 'adjust_cart' item.id %}">
                            {% csrf_token %}
                            <td>{{ item.quantity }}</td>
                            <td><label>
                                <input id="quantity" name="quantity" type="number"
                                       min="0" max="999" class="form-control input-number text-white"
                                       value="{{ item.quantity }}">
                            </label>
                                <button type="submit" class="btn btn-vt">Amend
                                </button>
                            </td>

                        </form>
                        <td> {{ item.product.price }}</td>
                    </tr>
                {% endfor %}
                <tr class="text-white">
                    <td><b>Total</b></td>
                    <td colspan="3"></td>
                    <td colspan="num"><b>Â£{{ total }}</b></td>
                </tr>
                </tbody>
            </table>
            <p class="text-right">
                <a href="{% url 'checkout' %}" class="btn btn-vt">Checkout</a>
            </p>
        {% else %}
            <div class="row">
                <div class="col-12 text-center">
                    <p class="page-desc">Your Cart is empty! have a look at the products in our store.</p>
                    <a class="nav-link" href="{% url 'products' %}">
                        <button type="button" class="btn btn-warning">visit our store to purchase</button>
                    </a>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}